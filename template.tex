\documentclass{ctexart}

% 设置文档的字体、编码等
\usepackage[UTF8]{ctex}
\usepackage[T1]{fontenc}
\usepackage{listings} % 代码显示
\usepackage{algorithm2e} % 算法排版
\usepackage{xcolor} % 代码高亮

% 代码高亮设置
\definecolor{codegreen}{rgb}{0,0.6,0}
\definecolor{codegray}{rgb}{0.5,0.5,0.5}
\definecolor{codepurple}{rgb}{0.58,0,0.82}
\definecolor{backcolour}{rgb}{0.95,0.95,0.92}
\definecolor{codered}{rgb}{0.6,0,0}
\definecolor{codeblue}{rgb}{0,0,0.6}

\lstdefinestyle{mystyle}{
    backgroundcolor=\color{backcolour},
    commentstyle=\color{codegreen},
    keywordstyle=\color{magenta},
    numberstyle=\tiny\color{codegray},
    stringstyle=\color{codepurple},
    basicstyle=\ttfamily\footnotesize,
    breakatwhitespace=false,
    breaklines=true,
    captionpos=b,
    keepspaces=true,
    numbers=left,
    numbersep=5pt,
    showspaces=false,
    showstringspaces=false,
    showtabs=false,
    tabsize=2
}

\lstdefinestyle{cuda}{
    language=C++,
    backgroundcolor=\color{backcolour},
    commentstyle=\color{codegreen},
    keywordstyle=\color{codeblue},
    numberstyle=\tiny\color{codegray},
    stringstyle=\color{codered},
    basicstyle=\ttfamily\footnotesize,
    breaklines=true,
    captionpos=b,
    morekeywords={__global__, __device__, __host__, cudaMalloc, cudaMemcpy, cudaFree},
    keepspaces=true,
    numbers=left,
    numbersep=5pt
}

\lstset{style=mystyle}

\title{示例文档}
\author{作者名}
\date{\today}

\begin{document}

\maketitle

\section{介绍}
这是一个支持中文的 LaTeX 模板，适用于展示代码和算法~\cite{knuth1984texbook}。

\section{代码示例}
展示一个 Python 代码示例：

\begin{lstlisting}[language=Python, caption=Python 示例代码]
# Python 示例
def hello_world():
    print("Hello, world!")
\end{lstlisting}

展示一个 CUDA C 代码示例：

\begin{lstlisting}[style=cuda, caption=CUDA C 示例代码]
// CUDA C 示例
__global__ void hello_cuda() {
    printf("Hello, CUDA!\n");
}
\end{lstlisting}

\section{算法示例}
展示一个算法示例：

\begin{algorithm}[H]
\SetAlgoLined
\KwResult{输出 "Hello, world!"}
 初始化\;
 \While{条件}{
  "Hello, world!" 输出\;
 }
 \caption{算法示例}
\end{algorithm}

\appendix
\section{附录A}
这里是附录A的内容，可以包含更多的代码示例、数据表格或额外的注释。

\section{附录B}
这里是附录B的内容，可以进一步详述文档中引用的研究或方法论。

% 添加文献列表
\bibliographystyle{plain}
\bibliography{references}

\end{document}
